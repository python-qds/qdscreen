
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>qdscreen</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#qdscreen" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="qdscreen" class="md-header__button md-logo" aria-label="qdscreen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            qdscreen
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/python-qds/qdscreen/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="qdscreen" class="md-nav__button md-logo" aria-label="qdscreen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    qdscreen
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/python-qds/qdscreen/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-remove-correlated-variables" class="md-nav__link">
    1. Remove correlated variables
  </a>
  
    <nav class="md-nav" aria-label="1. Remove correlated variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-strict-determinism" class="md-nav__link">
    a. Strict determinism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-quasi-determinism" class="md-nav__link">
    b. Quasi determinism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-integrating-with-scikit-learn" class="md-nav__link">
    c. Integrating with scikit-learn
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-learn-a-bayesian-network-structure" class="md-nav__link">
    2. Learn a Bayesian Network structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features-benefits" class="md-nav__link">
    Main features / benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
    <nav class="md-nav" aria-label="See Also">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#others" class="md-nav__link">
    Others
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="api_reference/" class="md-nav__link">
        API reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-remove-correlated-variables" class="md-nav__link">
    1. Remove correlated variables
  </a>
  
    <nav class="md-nav" aria-label="1. Remove correlated variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-strict-determinism" class="md-nav__link">
    a. Strict determinism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-quasi-determinism" class="md-nav__link">
    b. Quasi determinism
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-integrating-with-scikit-learn" class="md-nav__link">
    c. Integrating with scikit-learn
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-learn-a-bayesian-network-structure" class="md-nav__link">
    2. Learn a Bayesian Network structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features-benefits" class="md-nav__link">
    Main features / benefits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
    <nav class="md-nav" aria-label="See Also">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#others" class="md-nav__link">
    Others
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/python-qds/qdscreen/edit/main/docs/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="qdscreen">qdscreen<a class="headerlink" href="#qdscreen" title="Permanent link">&para;</a></h1>
<p><em>Remove redundancy in your categorical variables and increase your models performance.</em></p>
<p><a href="https://pypi.python.org/pypi/qdscreen/"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/qdscreen.svg" /></a> <a href="https://github.com/python-qds/qdscreen/actions/workflows/base.yml"><img alt="Build Status" src="https://github.com/python-qds/qdscreen/actions/workflows/base.yml/badge.svg" /></a> <a href="reports/junit/report.html"><img alt="Tests Status" src="reports/junit/junit-badge.svg?dummy=8484744" /></a> <a href="reports/coverage/"><img alt="Coverage Status" src="reports/coverage/coverage-badge.svg?dummy=8484744" /></a> <a href="https://codecov.io/gh/smarie/python-odsclient"><img alt="codecov" src="https://codecov.io/gh/smarie/python-odsclient/branch/main/graph/badge.svg" /></a> <a href="reports/flake8/"><img alt="Flake8 Status" src="reports/flake8/flake8-badge.svg?dummy=8484744" /></a></p>
<p><a href="https://python-qds.github.io/qdscreen/"><img alt="Documentation" src="https://img.shields.io/badge/doc-latest-blue.svg" /></a> <a href="https://pypi.python.org/pypi/qdscreen/"><img alt="PyPI" src="https://img.shields.io/pypi/v/qdscreen.svg" /></a> <a href="https://pepy.tech/project/qdscreen"><img alt="Downloads" src="https://pepy.tech/badge/qdscreen" /></a> <a href="https://pepy.tech/project/qdscreen"><img alt="Downloads per week" src="https://pepy.tech/badge/qdscreen/week" /></a> <a href="https://github.com/python-qds/qdscreen/stargazers"><img alt="GitHub stars" src="https://img.shields.io/github/stars/python-qds/qdscreen.svg" /></a></p>
<p><code>qdscreen</code> provides a python implementation of the Quasi-determinism screening algorithm (also known as <code>qds-BNSL</code>) from T.Rahier's PhD thesis, 2018.</p>
<p>Most data scientists are familiar with the concept of <em>correlation</em> between continuous variables. This concept extends to categorical variables, and is known as <em>functional dependency</em> in the field of relational databases mining. We also name it <em>determinism</em> in the context of Machine Learning and Statistics, to indicate that when a random variable <code>X</code> is known then the value of another variable <code>Y</code> is determined with absolute certainty. <em>"Quasi-"</em>determinism is an extension of this concept to handle noise or extremely rare cases in data.</p>
<p><code>qdscreen</code> is able to detect and remove (quasi-)deterministic relationships in a dataset:</p>
<ul>
<li>
<p>either as a preprocessing step in any general-purpose data science pipeline</p>
</li>
<li>
<p>or as an accelerator of a Bayesian Network Structure Learning method such as <a href="https://github.com/ncullen93/pyGOBN"><code>pyGOBN</code></a></p>
</li>
</ul>
<h2 id="installing">Installing<a class="headerlink" href="#installing" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>&gt; pip install qdscreen
</code></pre></div>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="1-remove-correlated-variables">1. Remove correlated variables<a class="headerlink" href="#1-remove-correlated-variables" title="Permanent link">&para;</a></h3>
<h4 id="a-strict-determinism">a. Strict determinism<a class="headerlink" href="#a-strict-determinism" title="Permanent link">&para;</a></h4>
<p>Let's consider the following dataset:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
   <span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
   <span class="s1">&#39;V&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
   <span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span>
   <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span>
   <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">],</span>
   <span class="s1">&#39;Z&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>  
<span class="p">})</span>
</code></pre></div>
<p>We can detect correlated categorical variables (functional dependencies):</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">qdscreen</span> <span class="kn">import</span> <span class="n">qd_screen</span>

<span class="c1"># detect strict deterministic relationships</span>
<span class="n">qd_forest</span> <span class="o">=</span> <span class="n">qd_screen</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qd_forest</span><span class="p">)</span>
</code></pre></div>
<p>yields</p>
<div class="highlight"><pre><span></span><code>QDForest (6 vars):
 - 3 roots (1+2*): U*, X*, Z
 - 3 other nodes: V, W, Y

U
└─ V
   └─ W

X
└─ Y
</code></pre></div>
<p>So with only features <code>U</code>, and <code>X</code> we should be able to predict <code>V</code>, <code>W</code>, and <code>Y</code>. <code>Z</code> is a root but has no children so it does not help. We can create a feature selection model from this deterministic forest object:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns in df: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="c1"># fit a feature selection model</span>
<span class="n">feat_selector</span> <span class="o">=</span> <span class="n">qd_forest</span><span class="o">.</span><span class="n">fit_selector_model</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># use it to filter...</span>
<span class="n">only_important_features</span> <span class="o">=</span> <span class="n">feat_selector</span><span class="o">.</span><span class="n">remove_qd</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns in only_important_features: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">only_important_features</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="c1"># or to restore/predict</span>
<span class="n">restored_full_df</span> <span class="o">=</span> <span class="n">feat_selector</span><span class="o">.</span><span class="n">predict_qd</span><span class="p">(</span><span class="n">only_important_features</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Columns in restored_full_df: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">restored_full_df</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="c1"># note that the order of columns differs from origin</span>
<span class="n">pd</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_frame_equal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">restored_full_df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
</code></pre></div>
<p>yields</p>
<div class="highlight"><pre><span></span><code>Columns in df: [&#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;]
Columns in only_important_features: [&#39;U&#39;, &#39;X&#39;, &#39;Z&#39;]
Columns in restored_full_df: [&#39;U&#39;, &#39;X&#39;, &#39;Z&#39;, &#39;V&#39;, &#39;W&#39;, &#39;Y&#39;]
</code></pre></div>
<h4 id="b-quasi-determinism">b. Quasi determinism<a class="headerlink" href="#b-quasi-determinism" title="Permanent link">&para;</a></h4>
<p>In the above example, we used the default settings for <code>qd_screen</code>. By default only deterministic relationships are detected, which means that only variables that can perfectly be predicted (without loss of information) from others in the dataset are removed.</p>
<p>In real-world datasets, some noise can occur in the data, or some very rare cases might happen, that you may wish to discard. Let's first look at the strength of the various relationships thanks to <code>keep_stats=True</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># the same than above, but this time remember the various indicators</span>
<span class="n">qd_forest</span> <span class="o">=</span> <span class="n">qd_screen</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">keep_stats</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># display them</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qd_forest</span><span class="o">.</span><span class="n">stats</span><span class="p">)</span>
</code></pre></div>
<p>yields:</p>
<div class="highlight"><pre><span></span><code>Statistics computed for dataset:
   U  V  W  X  Y  Z
0  a  a  a  a  b  a
1  b  b  b  a  b  a
...(10 rows)

Entropies (H):
U    1.970951
V    1.570951
W    0.881291
X    1.570951
Y    1.570951
Z    0.970951
dtype: float64

Conditional entropies (Hcond = H(row|col)):
          U         V         W         X         Y         Z
U  0.000000  0.400000  1.089660  0.875489  0.875489  1.475489
V  0.000000  0.000000  0.689660  0.875489  0.875489  1.200000
W  0.000000  0.000000  0.000000  0.875489  0.875489  0.875489
X  0.475489  0.875489  1.565148  0.000000  0.000000  0.875489
Y  0.475489  0.875489  1.565148  0.000000  0.000000  0.875489
Z  0.475489  0.600000  0.965148  0.275489  0.275489  0.000000

Relative conditional entropies (Hcond_rel = H(row|col)/H(row)):
          U         V         W         X         Y         Z
U  0.000000  0.202948  0.552860  0.444196  0.444196  0.748618
V  0.000000  0.000000  0.439008  0.557299  0.557299  0.763869
W  0.000000  0.000000  0.000000  0.993416  0.993416  0.993416
X  0.302676  0.557299  0.996307  0.000000  0.000000  0.557299
Y  0.302676  0.557299  0.996307  0.000000  0.000000  0.557299
Z  0.489715  0.617951  0.994024  0.283731  0.283731  0.000000
</code></pre></div>
<p>In the last row of the last table (relative conditional entropies) we see that variable <code>Z</code>'s entropies decreases drastically to reach 28% of its initial entropy, if <code>X</code> or <code>Y</code> is known. So if we use quasi-determinism with relative threshold of 29% <code>Z</code> would be eliminated. </p>
<div class="highlight"><pre><span></span><code><span class="c1"># detect quasi deterministic relationships</span>
<span class="n">qd_forest2</span> <span class="o">=</span> <span class="n">qd_screen</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">relative_eps</span><span class="o">=</span><span class="mf">0.29</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">qd_forest2</span><span class="p">)</span>
</code></pre></div>
<p>Yields:</p>
<div class="highlight"><pre><span></span><code>QDForest (6 vars):
 - 2 roots (0+2*): U*, X*
 - 4 other nodes: V, W, Y, Z

U
└─ V
   └─ W

X
└─ Y
└─ Z
</code></pre></div>
<p>This time <code>Z</code> is correctly determined as being predictible from <code>X</code>. </p>
<div class="admonition note">
<p class="admonition-title">equivalent nodes</p>
<p><code>X</code> and <code>Y</code> are equivalent variables so each of them could be the parent of the other. To avoid cycles so that the result is still a forest (a set of trees), <code>X</code> was arbitrary selected as being the "representative" parent of all its equivalents, and <code>Z</code> is attached to this representative parent.</p>
</div>
<p>Another, easier way to detect that setting a relative threshold to 29% would eliminate <code>Z</code> is to print the conditional entropies in increasing order:</p>
<div class="highlight"><pre><span></span><code><span class="n">ce_df</span> <span class="o">=</span> <span class="n">qd_forest</span><span class="o">.</span><span class="n">get_entropies_table</span><span class="p">(</span><span class="n">from_to</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort_by</span><span class="o">=</span><span class="s2">&quot;rel_cond_entropy&quot;</span><span class="p">)</span> 
<span class="nb">print</span><span class="p">(</span><span class="n">ce_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</code></pre></div>
<p>which yields</p>
<div class="highlight"><pre><span></span><code>      cond_entropy  rel_cond_entropy
arc                                 
U-&gt;V      0.000000          0.000000
U-&gt;W      0.000000          0.000000
V-&gt;W      0.000000          0.000000
Y-&gt;X      0.000000          0.000000
X-&gt;Y      0.000000          0.000000
V-&gt;U      0.400000          0.202948
Y-&gt;Z      0.275489          0.283731
X-&gt;Z      0.275489          0.283731
U-&gt;X      0.475489          0.302676
U-&gt;Y      0.475489          0.302676
</code></pre></div>
<p>Or to use the helper plot function:</p>
<div class="highlight"><pre><span></span><code><span class="n">qd_forest</span><span class="o">.</span><span class="n">plot_increasing_entropies</span><span class="p">()</span>
</code></pre></div>
<p><img alt="inc_entropies_plot" src="imgs/increasing_entropies.png" /></p>
<h4 id="c-integrating-with-scikit-learn">c. Integrating with scikit-learn<a class="headerlink" href="#c-integrating-with-scikit-learn" title="Permanent link">&para;</a></h4>
<p><code>scikit-learn</code> is one of the most popular machine learning frameworks in python. It comes with a concept of <code>Pipeline</code> allowing you to chain several operators to make a model. <code>qdscreen</code> provides a <code>QDScreen</code> class for easy integration. It works exactly like other feature selection models in scikit-learn (e.g. <a href="https://scikit-learn.org/stable/modules/feature_selection.html#variance-threshold"><code>VarianceThreshold</code></a>):</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">qdscreen.sklearn</span> <span class="kn">import</span> <span class="n">QDScreen</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">X</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">selector</span> <span class="o">=</span> <span class="n">QDScreen</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Xsel</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Xsel</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">4</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">selector</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">Xsel</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</code></pre></div>
<h3 id="2-learn-a-bayesian-network-structure">2. Learn a Bayesian Network structure<a class="headerlink" href="#2-learn-a-bayesian-network-structure" title="Permanent link">&para;</a></h3>
<p>TODO see <a href="https://github.com/python-qds/qdscreen/issues/6">#6</a>.</p>
<h2 id="main-features-benefits">Main features / benefits<a class="headerlink" href="#main-features-benefits" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>A feature selection algorithm able to eliminate quasi-deterministic relationships</p>
<ul>
<li>a base version compliant with numpy and pandas datasets</li>
<li>a scikit-learn compliant version (numpy only)</li>
</ul>
</li>
<li>
<p>An accelerator for Bayesian Network Structure Learning tasks</p>
</li>
</ul>
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Bayesian Network libraries in python: </p>
<ul>
<li><a href="https://github.com/ncullen93/pyGOBN"><code>pyGOBN</code></a> (MIT license)</li>
<li><a href="https://github.com/pgmpy/pgmpy"><code>pgmpy</code></a> (MIT license)</li>
<li><a href="https://pomegranate.readthedocs.io/en/latest/index.html"><code>pomegranate</code></a> (MIT license)</li>
<li><a href="http://bayespy.org/"><code>bayespy</code></a> (MIT license)</li>
</ul>
</li>
<li>
<p>Functional dependencies libraries in python:</p>
<ul>
<li><a href="https://github.com/anonexp/fd_miner"><code>fd_miner</code></a>, an algorithm that was used in <a href="https://hal.archives-ouvertes.fr/hal-01856516/document">this paper</a>. The repository contains a list of reference datasets too.</li>
<li><a href="https://github.com/USEPA/FDTool"><code>FDTool</code></a> a python 2 algorithm to mine for functional dependencies, equivalences and candidate keys. From <a href="https://f1000research.com/articles/7-1667">this paper</a>.</li>
<li><a href="https://github.com/amrith/functional-dependencies"><code>functional-dependencies</code></a></li>
<li><a href="https://github.com/gustavclausen/functional-dependency-finder"><code>functional-dependency-finder</code></a> connects to a MySQL db and finds functional dependencies.</li>
</ul>
</li>
<li>
<p>Other libs for probabilistic inference:</p>
<ul>
<li><a href="https://github.com/michaelnowotny/pyjags"><code>pyjags</code></a> (GPLv2 license)</li>
<li><a href="http://edwardlib.org/"><code>edward</code></a> (Apache License, Version 2.0)</li>
</ul>
</li>
<li>
<p>Stackoverflow discussions:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/2157531/python-code-for-determining-which-normal-form-tabular-data-is-in">detecting normal forms</a></li>
<li><a href="https://stackoverflow.com/questions/2822809/program-to-find-canonical-cover-or-minimum-number-of-functional-dependencies">canonical cover</a></li>
</ul>
</li>
</ul>
<h3 id="others">Others<a class="headerlink" href="#others" title="Permanent link">&para;</a></h3>
<p><em>Do you like this library ? You might also like <a href="https://github.com/smarie/OVERVIEW#python">smarie's other python libraries</a></em> </p>
<h2 id="want-to-contribute">Want to contribute ?<a class="headerlink" href="#want-to-contribute" title="Permanent link">&para;</a></h2>
<p>Details on the github page: <a href="https://github.com/python-qds/qdscreen">https://github.com/python-qds/qdscreen</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="api_reference/" class="md-footer__link md-footer__link--next" aria-label="Next: API reference" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API reference
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>